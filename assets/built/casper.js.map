{"version":3,"sources":["utils.js","fluidvids.js","gallery-card.js","infinite-scroll.js","sticky-nav-title.js"],"names":["loadJS","url","implementationCode","location","scriptTag","document","createElement","src","onload","onreadystatechange","appendChild","getParameterByName","name","window","href","replace","results","RegExp","exec","decodeURIComponent","root","factory","define","amd","exports","module","fluidvids","this","selector","players","css","join","head","getElementsByTagName","matches","test","fluid","elem","data","getAttribute","height","width","wrap","parentNode","insertBefore","className","setAttribute","style","paddingTop","parseInt","render","nodes","querySelectorAll","i","length","init","obj","key","div","innerHTML","childNodes","addEventListener","forEach","image","container","closest","ratio","attributes","value","flex","nextElement","querySelector","feedElement","buffer","ticking","loading","lastScrollY","scrollY","lastWindowHeight","innerHeight","lastDocumentHeight","documentElement","scrollHeight","onScroll","passive","onResize","requestTick","onPageLoad","status","removeEventListener","response","item","importNode","resNextElement","onUpdate","xhr","XMLHttpRequest","responseType","open","send","requestAnimationFrame","Casper","stickyNavTitle","options","nav","navSelector","title","titleSelector","update","getBoundingClientRect","top","offsetHeight","classList","add","activeClass","remove"],"mappings":"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","file":"casper.js","sourcesContent":["function loadJS(url, implementationCode, location) {\n    var scriptTag = document.createElement(\"script\");\n    scriptTag.src = url;\n    scriptTag.onload = implementationCode;\n    scriptTag.onreadystatechange = implementationCode;\n    location.appendChild(scriptTag);\n}\n\nfunction getParameterByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n","/*! fluidvids.js v2.4.1 | (c) 2014 @toddmotto | https://github.com/toddmotto/fluidvids */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory;\n    } else {\n        root.fluidvids = factory();\n    }\n})(this, function () {\n    \"use strict\";\n\n    var fluidvids = {\n        selector: [\n            'iframe[src*=\"player.vimeo.com\"]',\n            'iframe[src*=\"youtube.com\"]',\n            'iframe[src*=\"youtube-nocookie.com\"]',\n            'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n            \"object\",\n            \"embed\",\n        ],\n        players: [\"www.youtube.com\", \"player.vimeo.com\"],\n    };\n\n    var css = [\n        \".fluidvids {\",\n        \"width: 100%; max-width: 100%; position: relative;\",\n        \"}\",\n        \".fluidvids-item {\",\n        \"position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;\",\n        \"}\",\n    ].join(\"\");\n\n    var head = document.head || document.getElementsByTagName(\"head\")[0];\n\n    function matches(src) {\n        return new RegExp(\n            \"^(https?:)?//(?:\" + fluidvids.players.join(\"|\") + \").*$\",\n            \"i\"\n        ).test(src);\n    }\n\n    function getRatio(height, width) {\n        return (parseInt(height, 10) / parseInt(width, 10)) * 100 + \"%\";\n    }\n\n    function fluid(elem) {\n        if (\n            (!matches(elem.src) && !matches(elem.data)) ||\n            !!elem.getAttribute(\"data-fluidvids\")\n        )\n            return;\n        var wrap = document.createElement(\"div\");\n        elem.parentNode.insertBefore(wrap, elem);\n        elem.className +=\n            (elem.className ? \" \" : \"\") +\n            \"fluidvids-item fluid-width-video-wrapper\";\n        elem.setAttribute(\"data-fluidvids\", \"loaded\");\n        wrap.className += \"fluidvids fluid-width-video-container\";\n        wrap.style.paddingTop = getRatio(elem.height, elem.width);\n        wrap.appendChild(elem);\n    }\n\n    function addStyles() {\n        var div = document.createElement(\"div\");\n        div.innerHTML = \"<p>x</p><style>\" + css + \"</style>\";\n        head.appendChild(div.childNodes[1]);\n    }\n\n    fluidvids.render = function () {\n        var nodes = document.querySelectorAll(fluidvids.selector.join());\n        var i = nodes.length;\n        while (i--) {\n            fluid(nodes[i]);\n        }\n    };\n\n    fluidvids.init = function (obj) {\n        for (var key in obj) {\n            fluidvids[key] = obj[key];\n        }\n        fluidvids.render();\n        addStyles();\n    };\n\n    return fluidvids;\n});\n","/* eslint-env browser */\n\n/**\n * Gallery card support\n * Used on any individual post/page\n *\n * Detects when a gallery card has been used and applies sizing to make sure\n * the display matches what is seen in the editor.\n */\n\n(function (window, document) {\n    var resizeImagesInGalleries = function resizeImagesInGalleries() {\n        var images = document.querySelectorAll('.kg-gallery-image img');\n        images.forEach(function (image) {\n            var container = image.closest('.kg-gallery-image');\n            var width = image.attributes.width.value;\n            var height = image.attributes.height.value;\n            var ratio = width / height;\n            container.style.flex = ratio + ' 1 0%';\n        });\n    };\n\n    document.addEventListener('DOMContentLoaded', resizeImagesInGalleries);\n})(window, document);\n","/* eslint-env browser */\n\n/**\n * Infinite Scroll\n * Used on all pages where there is a list of posts (homepage, tag index, etc).\n *\n * When the page is scrolled to 300px from the bottom, the next page of posts\n * is fetched by following the the <link rel=\"next\" href=\"...\"> that is output\n * by {{ghost_head}}.\n *\n * The individual post items are extracted from the fetched pages by looking for\n * a wrapper element with the class \"post-card\". Any found elements are appended\n * to the element with the class \"post-feed\" in the currently viewed page.\n */\n\n(function (window, document) {\n    // next link element\n    var nextElement = document.querySelector('link[rel=next]');\n    if (!nextElement) {\n        return;\n    }\n\n    // post feed element\n    var feedElement = document.querySelector('.post-feed');\n    if (!feedElement) {\n        return;\n    }\n\n    var buffer = 300;\n\n    var ticking = false;\n    var loading = false;\n\n    var lastScrollY = window.scrollY;\n    var lastWindowHeight = window.innerHeight;\n    var lastDocumentHeight = document.documentElement.scrollHeight;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n            return;\n        }\n\n        // append contents\n        var postElements = this.response.querySelectorAll('.post-card');\n        postElements.forEach(function (item) {\n            // document.importNode is important, without it the item's owner\n            // document will be different which can break resizing of\n            // `object-fit: cover` images in Safari\n            feedElement.appendChild(document.importNode(item, true));\n        });\n\n        // set next link\n        var resNextElement = this.response.querySelector('link[rel=next]');\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            window.removeEventListener('scroll', onScroll);\n            window.removeEventListener('resize', onResize);\n        }\n\n        // sync status\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        ticking = false;\n        loading = false;\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) {\n            return;\n        }\n\n        // return if not scroll to the bottom\n        if (lastScrollY + lastWindowHeight <= lastDocumentHeight - buffer) {\n            ticking = false;\n            return;\n        }\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = 'document';\n\n        xhr.addEventListener('load', onPageLoad);\n\n        xhr.open('GET', nextElement.href);\n        xhr.send(null);\n    }\n\n    function requestTick() {\n        ticking || window.requestAnimationFrame(onUpdate);\n        ticking = true;\n    }\n\n    function onScroll() {\n        lastScrollY = window.scrollY;\n        requestTick();\n    }\n\n    function onResize() {\n        lastWindowHeight = window.innerHeight;\n        lastDocumentHeight = document.documentElement.scrollHeight;\n        requestTick();\n    }\n\n    window.addEventListener('scroll', onScroll, {passive: true});\n    window.addEventListener('resize', onResize);\n\n    requestTick();\n})(window, document);\n","/* eslint-env browser */\n\n/**\n * Nav/Title replacement\n * Used on invividual post pages, displays the post title in place of the nav\n * bar when scrolling past the title\n *\n * Usage:\n * ```\n * Casper.stickyTitle({\n *     navSelector: '.site-nav-main',\n *     titleSelector: '.post-full-title',\n *     activeClass: 'nav-post-title-active'\n * });\n * ```\n */\n\n(function (window, document) {\n    // set up Casper as a global object\n    if (!window.Casper) {\n        window.Casper = {};\n    }\n\n    window.Casper.stickyNavTitle = function stickyNavTitle(options) {\n        var nav = document.querySelector(options.navSelector);\n        var title = document.querySelector(options.titleSelector);\n\n        var lastScrollY = window.scrollY;\n        var ticking = false;\n\n        function onScroll() {\n            lastScrollY = window.scrollY;\n            requestTick();\n        }\n\n        function requestTick() {\n            if (!ticking) {\n                requestAnimationFrame(update);\n            }\n            ticking = true;\n        }\n\n        function update() {\n            var trigger = title.getBoundingClientRect().top + window.scrollY;\n            var triggerOffset = title.offsetHeight + 35;\n\n            // show/hide post title\n            if (lastScrollY >= trigger + triggerOffset) {\n                nav.classList.add(options.activeClass);\n            } else {\n                nav.classList.remove(options.activeClass);\n            }\n\n            ticking = false;\n        }\n\n        window.addEventListener('scroll', onScroll, {passive: true});\n\n        update();\n    };\n})(window, document);\n"]}